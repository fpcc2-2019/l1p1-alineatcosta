---
title: "Temperatura JP x CG"
output:
    html_document:
    df_print: paged
theme: sandstone
---

```{r echo=FALSE, message=FALSE, warning=FALSE}
library(tidyverse)
library(here)
library(lubridate)
library(ggbeeswarm)
library(ggplot2)
library(readr)
dataset <- read_csv(NULL)
View(dataset)

install.packages("ggplot2")
theme_set(theme_bw())

install.packages('dplyr')
library(dplyr)
```

```{r read}
# Tem a leitura de outra forma
climas = read_csv("../data/clima_cg_jp-semanal.csv")

glimpse(climas)
```

## colunas cidade,semana,tmedia,tmax,tmin,chuva,mes,ano

## Temperatura

### Onde é mais quente? O CONCEITO DE MAIS QUENTE PODE SER MÁXIMAS OU MÉDIAS TEMPERATURAS. VOU CONSIDERAR AS MÉDIAS, PQ  QUERO VER "NORMALMENTE".

# Esse mostra que em CG a temperatura é mais variada do que em JP
ggplot(data = climas) + 
  geom_point(mapping = aes(tmedia, cidade))
  
# Esse mostra que em CG a temperatura máxima varia mais do que em JP
ggplot(data = climas) + 
  geom_jitter(mapping = aes(tmedia, cidade))
  
# pega os valores de 'x' e conta quantas vezes apareceu
qplot(x=tmedia, y=cidade, data = climas,  color=I('pink'), fill=I('black'))

# QUERIA VER A EVOLU??O M?DIA DAS CHUVAS EM CG E EM JP. ou faz pela semana ou pela m?dia para o m?s.
climas %>%
  ggplot() +
    geom_line(aes(x = semana, y = tmedia, color = cidade))


### As temperaturas máximas semanais (o pico do calor) são tão diferentes quanto as médias? Mais? ACHO QUE NÃO ENTENDI A PERGUNTA. here!!!

# Quero entender como a média ou a mediana de uma variável se comportam em relação a outra variável
# dlpyR permite dividir uma estrutura de dados e aplicar funções a partes dos dados, ex: filter(), group_by(), mutate() e arrange()

# Agrupando a estrutura de dados por semana. JÁ É AGRUPADO POR SEMANA!
temp_por_semanas <- group_by(climas, semana)
temp_por_ano <- group_by(climas, ano)
medias <- summarise(temp_por_semanas,
          tmax_mean = mean(tmax),
          tmedia_median = mean(tmedia),
          n = n()) # pega o número de pessoas em cada grupo
medias


### Quais os meses mais quentes e mais frios? 


### Qual foi o São João mais frio de CG que está nos nossos dados?

# FILTRA O MÊS POR 6
clima_mes_6 <- subset(climas, mes == 6)
clima_mes_6_em_cg <- subset(clima_mes_6, cidade == "Campina Grande")
# calculando o total para o ano 2006 em campina grande
clima_mes_6_em_cg %>% 
  filter(ano == "2006") %>% 
  summarise(total_max = sum(tmax), total_media = sum(tmedia), maximo = first(tmax))
  
  
# calculando o total para todos os anos em campina grande. O arrange faz a ordena??o.
clima_mes_6_em_cg %>% 
  group_by(ano) %>% 
  summarise(total_min = sum(tmin)) %>% 
  arrange(total_min)

  
# Ent?o, considerando a soma das temperaturas m?nimas por semana, o ano de 2018 teve o SJ mais frio. 


## Chuva

### Quanto chove por semana em JP e CG?

### Como é a distribuição do volume de chuvas por semana em JP e CG? A chuva varia mais ou menos que a temperatura? O formato da distribuição é igual? 

### No geral, onde chove mais?

# quero os registros com a média dos meses, com a máxima e mínima dos meses

# calculando o total para todos os meses em campina grande. O arrange faz a ordena??o.
dados_chuva <- climas %>% 
  group_by(ano, mes, cidade) %>% 
  filter(ano == 2018) %>%
  summarise(total_min = sum(tmedia)) %>% 
  arrange(ano)

dados_chuva

# Agr e só gerar o gráfico de barras
ggplot(dados_chuva, aes(mes, total_min)) +   
  geom_bar(aes(fill = cidade), position = "dodge", stat="identity")
  
# Então, no geral, choveu mais em João Pessoa no ano de 2018. (analisar nos dados, se removendo o filter junta todos os anos)

### A distribuição é diferente em meses específicos? 


---
title: "Temperatura JP x CG"
output:
    html_document:
    df_print: paged
theme: sandstone
---

```{r echo=FALSE, message=FALSE, warning=FALSE}
library(ggplot2)
library(readr)
library(dplyr)
library(gridExtra)

```

```{r read}
climas = read_csv("../data/clima_cg_jp-semanal.csv")

glimpse(climas)
```

## Temperatura

### Onde √© mais quente? 

<!--# Temperatura mÈdia~~ -->
```{r}
tem_media <- ggplot(data = climas) + 
  geom_point(mapping = aes(cidade, tmedia))
```

<!--# Temperatura m·xima-->
```{r}
tem_max <- ggplot(data = climas) + 
  geom_point(mapping = aes(cidade, tmax))
```

<!--# Plotando dois deles (em colunas)-->
```{r}
grid.arrange(tem_media , tem_max , ncol=2)
```

### An·lise: Analisando os gr·ficos podemos ver que Campina Grande tem as maiores temperaturas m·ximas, mas Jo„o Pessoa tem as maiores temperaturas mÈdias. 

<!--
### As temperaturas m√°ximas semanais (o pico do calor) s√£o t√£o diferentes quanto as m√©dias? Mais? ACHO QUE N√ÉO ENTENDI A PERGUNTA. here!!!

# Quero entender como a m√©dia ou a mediana de uma vari√°vel se comportam em rela√ß√£o a outra vari√°vel
# dlpyR permite dividir uma estrutura de dados e aplicar fun√ß√µes a partes dos dados, ex: filter(), group_by(), mutate() e arrange()

# Agrupando a estrutura de dados por semana. J√Å √â AGRUPADO POR SEMANA!
temp_por_semanas <- group_by(climas, semana)
temp_por_ano <- group_by(climas, ano)
medias <- summarise(temp_por_semanas,
          tmax_mean = mean(tmax),
          tmedia_median = mean(tmedia),
          n = n()) # pega o n√∫mero de pessoas em cada grupo
medias
-->


<!--### Quais os meses mais quentes e mais frios?-->






### Qual foi o S√£o Jo√£o mais frio de CG que est√° nos nossos dados?

<!--# FILTRA OS DADOS POR 6 -->
```{r}
dados_cg_10_anos <- filter(climas, mes == 6) %>%
              filter(cidade == "Campina Grande") %>%
              filter (ano > "2009")
```
  
<!--# calculando o total para todos os anos em campina grande. O arrange faz a ordena??o. -->
```{r}
dados_cg_10_anos %>% 
  group_by(ano) %>% 
  summarise(temperatura = mean(tmedia)) %>%
  arrange(temperatura) %>%
  top_n(n = -3, wt = temperatura) %>%
  ggplot(aes(x = ano, y = temperatura), group=1) +
  geom_point(size=3, color="red") +
  xlab("ano")
```

### An·lise: Considerando a mÈdia das temperaturas mÌnimas em Campina Grande no mÍs de Junho nos ˙ltimos 10 anos, o ano de 2015 teve o S„o Jo„o mais frio. Seguido por 2011 e 2018. 


## Chuva

### Quanto chove por semana em JP e CG?

### Como √© a distribui√ß√£o do volume de chuvas por semana em JP e CG? A chuva varia mais ou menos que a temperatura? O formato da distribui√ß√£o √© igual? 

### No geral, onde chove mais?

<!-- # calculando o total para todos os meses em campina grande. -->
```{r}
dados_chuva <- climas %>% 
  group_by(ano, mes, cidade) %>% 
  summarise(total_min = sum(tmedia)) %>% 
  arrange(ano)

ggplot(dados_chuva, aes(mes, total_min)) +   
  geom_bar(aes(fill = cidade), position = "dodge", stat="identity")
```

### An·lise: No geral, choveu mais em Jo√£o Pessoa. 

### A distribui√ß√£o √© diferente em meses espec√≠ficos? 

